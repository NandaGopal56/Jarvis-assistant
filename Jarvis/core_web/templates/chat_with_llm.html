<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.1.2/dist/tailwind.min.css" rel="stylesheet">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body class="bg-gray-900 text-white font-sans">

    <main>
        <div x-data="sidebar" class="flex flex-col md:flex-row h-screen bg-gray-900 text-white">
            <!-- Sidebar -->
            <div :class="{'translate-x-0': open, '-translate-x-full': !open}"
                class="fixed md:static md:translate-x-0 left-0 top-0 h-full w-64 bg-black p-4 border-r border-gray-800 flex-shrink-0 overflow-hidden transition-transform duration-300 ease-in-out z-40">
                <h2 class="text-xl font-bold mb-4 text-center md:text-left">ChatGPT</h2>
                <button
                    class="w-full bg-blue-600 hover:bg-blue-700 transition-colors text-white px-4 py-2 rounded-lg mb-4 text-sm md:text-base">
                    New Chat
                </button>
                <nav class="space-y-2 md:space-y-4 text-center md:text-left">
                    <a href="#" class="block px-4 py-2 rounded-lg hover:bg-gray-800 text-sm md:text-base border-b border-gray-700">Option 1</a>
                    <a href="#" class="block px-4 py-2 rounded-lg hover:bg-gray-800 text-sm md:text-base border-b border-gray-700">Option 2</a>
                    <a href="#" class="block px-4 py-2 rounded-lg hover:bg-gray-800 text-sm md:text-base border-b border-gray-700">Option 3</a>
                </nav>
            </div>

            <!-- Overlay for mobile -->
            <div @click="open = false" 
                class="fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden transition-opacity duration-300 ease-in-out"
                :class="{'opacity-100': open, 'opacity-0 pointer-events-none': !open}">
            </div>

            <!-- Toggle Button (for mobile) -->
            <button @click="toggle()"
                class="md:hidden bg-blue-600 hover:bg-blue-700 transition-colors text-white px-4 py-2 rounded-lg fixed top-4 left-4 z-50">
                <svg class="w-6 h-6" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor"
                    viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>

            <!-- Chat Area -->
            <div class="flex flex-col flex-1">
                <!-- Chat Messages -->
                <div id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-4">
                    <!-- AI Message -->
                    <div class="flex items-start space-x-4">
                        <div class="bg-blue-600 p-3 rounded-full flex-shrink-0">
                            <svg class="text-white w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M8 16l-4-4m0 0l4-4m-4 4h16M16 4h4v16h-4" />
                            </svg>
                        </div>
                        <div class="bg-gray-800 p-4 rounded-lg max-w-full md:max-w-3xl">
                            <p>Hello! How can I assist you today?</p>
                        </div>
                    </div>

                    <!-- User Message -->
                    <div class="flex items-start justify-end space-x-4">
                        <div class="bg-gray-800 p-4 rounded-lg max-w-full md:max-w-3xl">
                            <p>I have a question about AI!</p>
                        </div>
                        <div class="bg-blue-600 p-3 rounded-full flex-shrink-0">
                            <svg class="text-white w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M20 12H4m0 0l4-4m-4 4l4 4" />
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Input Box -->
                <div class="bg-gray-800 p-4">
                    <form id="chat-form" class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4">
                        <textarea id="user-input"
                            class="flex-1 bg-gray-900 text-white rounded-lg px-4 py-2 focus:ring-blue-500 focus:border-blue-500 resize-y overflow-y-auto min-h-[40px] max-h-[160px]"
                            placeholder="Type your message..." rows="1"></textarea>
                        <button type="submit"
                            class="bg-blue-600 hover:bg-blue-700 transition-colors text-white px-4 py-2 rounded-lg h-fit">
                            Send
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <script>
            document.addEventListener('alpine:init', () => {
                Alpine.data('sidebar', () => ({
                    open: false,
                    toggle() {
                        this.open = !this.open;
                    }
                }));
            });

            document.addEventListener('DOMContentLoaded', function() {
                // Handle outside clicks
                document.addEventListener('click', function(e) {
                    if (window.innerWidth < 768) { // md breakpoint
                        const sidebar = document.querySelector('[x-data]');
                        const toggleButton = document.querySelector('button[class*="md:hidden"]');
                        
                        if (!sidebar.contains(e.target) && !toggleButton.contains(e.target)) {
                            const sidebarData = Alpine.store('sidebar');
                            if (sidebarData) {
                                sidebar.__x.$data.open = false;
                            }
                        }
                    }
                });

                // Handle resize
                window.addEventListener('resize', function() {
                    if (window.innerWidth >= 768) { // md breakpoint
                        const sidebar = document.querySelector('[x-data]');
                        if (sidebar && sidebar.__x) {
                            sidebar.__x.$data.open = false;
                        }
                    }
                });
            });

            // Simulate chat functionality
            document.getElementById("chat-form").addEventListener("submit", function (e) {
                e.preventDefault();
                const userInput = document.getElementById("user-input");
                const message = userInput.value.trim();

                if (message) {
                    // Append user message
                    const chatContainer = document.getElementById("chat-container");
                    const userMessage = `
                        <div class="flex items-start justify-end space-x-4">
                            <div class="bg-gray-800 p-4 rounded-lg max-w-full md:max-w-3xl">
                                <p>${message}</p>
                            </div>
                            <div class="bg-blue-600 p-3 rounded-full flex-shrink-0">
                                <svg class="text-white w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none"
                                    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M20 12H4m0 0l4-4m-4 4l4 4" />
                                </svg>
                            </div>
                        </div>`;
                    chatContainer.insertAdjacentHTML("beforeend", userMessage);

                    // Simulate AI Response
                    setTimeout(() => {
                        const aiMessage = `
                            <div class="flex items-start space-x-4">
                                <div class="bg-blue-600 p-3 rounded-full flex-shrink-0">
                                    <svg class="text-white w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M8 16l-4-4m0 0l4-4m-4 4h16M16 4h4v16h-4" />
                                    </svg>
                                </div>
                                <div class="bg-gray-800 p-4 rounded-lg max-w-full md:max-w-3xl">
                                    <p>This is an automated response. How can I help further?</p>
                                </div>
                            </div>`;
                        chatContainer.insertAdjacentHTML("beforeend", aiMessage);
                        chatContainer.scrollTop = chatContainer.scrollHeight;
                    }, 1000);

                    userInput.value = "";
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }
            });

            const textarea = document.getElementById("user-input");
            textarea.addEventListener("input", function() {
                this.style.height = "auto";
                this.style.height = Math.min(this.scrollHeight, 160) + "px";
            });

            // Add support for Shift+Enter for new lines, Enter to submit
            textarea.addEventListener("keydown", function(e) {
                if (e.key === "Enter" && !e.shiftKey) {
                    e.preventDefault();
                    document.getElementById("chat-form").dispatchEvent(new Event("submit"));
                }
            });
        </script>

    </main>
</body>

</html>